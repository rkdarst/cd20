{% extends "cd20/base.html" %}

{% block title %}Dataset {{ ds.id }} ({{ ds.netfile_name}}) {% endblock title%}

{% block pagetitle %}Dataset {{ ds.id }} ({{ ds.netfile_name}}) {% endblock pagetitle%}

{% block body %}

{% if ds.nodes %}
<p>Current network: {{ ds.netfile_name }}.
This dataset has {{ds.nodes}} nodes, {{ds.edges}} edges, and an
  average clustering coefficient of {{ds.clustc}}.
{% if ds.weighted == 1 %} All edges have explicit weights. {%endif%}
{% if ds.weighted == 2 %} There are some weighted edges. {%endif%}
{% if ds.weighted == 0 %} There are no weighted edges. {%endif%}
{% endif %}
</p>

<h2>Upload network</h2>

<p>Maximum upload size:
{{ds.get_network_limits.bytes|filesizeformat}},
{{ds.get_network_limits.nodes}} nodes,
{{ds.get_network_limits.edges}} edges.</p>

<form enctype="multipart/form-data" method="post">
  {% csrf_token %}
  <table>
    {{ netform.as_table }}
  </table>
  <input type="submit" value="Update network file"/>
  {{ netfile_upload_message }}
</form>


{#<h2>Community detection</h2>#}

<h2>Run a new method</h2>

<form method="post">
  {% csrf_token %}
  <table>
    {{ cdnameform.as_table }}
  </table>
<input type="submit" value="Add the method"/>
</form>


<h2>Existing results</h2>
<ul>
{% for cd in cd_runs %}
  <li><a href={% url cd20.views.cdrun ds.id cd.name %}>{{cd.name}}</a>
  {%if cd.state == 'D'%} Done,
    {{cd.runtime|floatformat}}s, {{cd.n_layers}} layers{{cd.n_layers|pluralize}}.  {#, [{{cd.n_cmty}}] communities per layer.#}
  {%endif%}
  {%if cd.state == 'R'%} Running for {{cd.rtime|timesince }}. {%endif%}
  {%if cd.state == 'Q'%} Queued for {{cd.qtime|timesince }}. {%endif%}
  {%if cd.state == 'X'%} Run died with error. {%endif%}

  </li>
{% empty %}
  <li>
    There are currently no CD runs.
  </li>
{% endfor %}
</ul>



{% endblock body%}
